<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>cgi_test_jquery</title>
        <script type="text/javascript" src="jquery-1.5.2.min.js"></script>
        <script type="text/javascript" charset="utf-8">
            function cgi_test(){
                // $.get('cgi-bin/dem_extractor.cgi', {},
                //         function(data) {
                //             $('#test_text').innerHTML = data;
                //         }, 
                //         alert(data));      
                // $.ajax({
                //       url: 'cgi-bin/dem_extractor.cgi',
                //       data: { name: "John", time: "2pm" },
                //       // success: function(data){alert(data);}
                //     });      
                var input = {lat: 40.02, long: 118.5, lat_span: 0.5, long_span:0.5, lat_samples: 20, long_samples:30};
                $.get('cgi-bin/dem_extractor.cgi', 
                        input, 
                        function(result,status,xhr){
                            alert(status);
                            // $('#test_text').html = status;
                            document.getElementById('test_text').html = status;
                            // document.getElementById('secondary_text').innerHTML = result;
                            document.getElementById('secondary_text').html = status;
                            // $('#secondary_text').innerHTML = result;
                        },
                        "script"
                    );
                // $.get('cgi-bin/dem_extractor.cgi', function(data){alert(data)});
                // $.get('cgi-bin/dem_extractor.cgi');
                // $('test_text').innerHTML = big_list[2];
            }
        </script>
        <script type="text/javascript" charset="utf-8">
            var arr_from_cgi = [ 1, 3, 5];
            var get_arr = function(){
                var response = function( data){
                   alert("Success function called: data is: " + data) ;
                   arr_from_cgi = data;
                   alert("Success function called: arr_from_cgi is: " + arr_from_cgi[1]) ;
                   
                   document.getElementById("array_mid_value").innerHTML = arr_from_cgi[1];
                };
                $.ajax({
                    url:"cgi-bin/return_js_array.cgi",
                    dataType: 'json',
                    data: {"random":3},
                    success: response,
                    error: function(status, other, third){alert("error: "+status + other + third)}
                })

            }            
        </script>
    </head>
    <body id="cgi_test_jquery" onload="">
        <div id="test_text">
            Original Text
        </div><br>
        <div id="secondary_text"></div>
        <button type="button" id="update_time" onclick="cgi_test()">Update time</button><br>
        <button type="button" id="get_arr_button" onclick="get_arr()">Get array</button><br>
        <div id="array_mid_value">
            unset arr value
        </div>
    </body>
</html>